# Sprint Status - Comportement V2
# G√©n√©r√©: 2026-01-28
# Workflow: BMAD Sprint Planning

project: comportement
version: "2.0"
sprint_start: "2026-01-28"
current_phase: implementation

# ============================================
# SPRINT 1: Refonte Interface Cartes (Epic 8)
# Priorit√©: HAUTE - Base visuelle pour tout le reste
# ============================================

sprint_1:
  name: "Refonte Interface Cartes"
  epic: 8
  status: "in_progress"
  stories:
    - id: "8.1"
      title: "Layout en grille de cartes"
      status: "completed"
      priority: "P0"
      estimated_complexity: "medium"
      description: |
        Remplacer StudentList par StudentGrid
        - Grille CSS adaptive (18-28 √©l√®ves)
        - Ordre alphab√©tique fixe
        - Pas de scroll
      acceptance_criteria:
        - "Grille affiche tous les √©l√®ves sans scroll"
        - "Ordre alphab√©tique ne change jamais"
        - "S'adapte √† 18 et 28 √©l√®ves"
      files_to_modify:
        - "src/components/StudentGrid/StudentGrid.tsx"
        - "src/components/StudentGrid/StudentGridCard.tsx"
        - "src/App.tsx"
      depends_on: []

    - id: "8.2"
      title: "Contenu carte √©l√®ve"
      status: "completed"
      priority: "P0"
      estimated_complexity: "medium"
      description: |
        Chaque carte affiche:
        - Pr√©nom + avertissements (‚ö†Ô∏è)
        - Ligne hebdo L-M-J-V (placeholder pour l'instant)
        - Boutons Avertir/Sanctionner
      acceptance_criteria:
        - "Pr√©nom visible avec indicateur avertissements"
        - "Emplacement r√©serv√© pour ligne L-M-J-V"
        - "Boutons fonctionnels"
      files_to_modify:
        - "src/components/StudentGrid/StudentGridCard.tsx"
        - "src/components/StudentGrid/WeeklyRewardLine.tsx"
      depends_on: ["8.1"]

    - id: "8.3"
      title: "Adaptation responsive sans scroll"
      status: "not_started"
      priority: "P1"
      estimated_complexity: "medium"
      description: |
        CSS Grid auto-fit pour √©cran 16:9
        - Taille cartes dynamique
        - Min-size pour lisibilit√©
        - Viewport units
      acceptance_criteria:
        - "1920x1080 affiche 18 √©l√®ves lisibles"
        - "1920x1080 affiche 28 √©l√®ves lisibles"
        - "Aucun scroll horizontal ou vertical"
      files_to_modify:
        - "src/components/StudentGrid/StudentGrid.tsx"
        - "src/App.css"
      depends_on: ["8.1"]

    - id: "8.4"
      title: "Mode TBI avec grille cartes"
      status: "completed"
      priority: "P1"
      estimated_complexity: "low"
      description: |
        TBIView utilise StudentGrid
        - M√™me layout que mode compact
        - Police plus grande
        - Contraste √©lev√©
      acceptance_criteria:
        - "TBI utilise la grille de cartes"
        - "Lisible √† 6 m√®tres"
        - "Mise √† jour temps r√©el"
      files_to_modify:
        - "src/components/TBIView.tsx"
      depends_on: ["8.1", "8.2"]

# ============================================
# SPRINT 2: Syst√®me R√©compenses (Epic 7)
# Priorit√©: HAUTE - Fonctionnalit√© principale V2
# ============================================

sprint_2:
  name: "Syst√®me de R√©compenses"
  epic: 7
  status: "in_progress"
  stories:
    - id: "7.1"
      title: "Table daily_rewards SQLite"
      status: "completed"
      priority: "P0"
      estimated_complexity: "low"
      description: |
        Cr√©er table daily_rewards
        - student_id, date, day_of_week, reward_type
        - Index pour performance
        - Migration depuis schema existant
      acceptance_criteria:
        - "Table cr√©√©e au d√©marrage"
        - "Contrainte UNIQUE student_id+date"
        - "Index fonctionnels"
      files_to_modify:
        - "src-tauri/src/db/init.rs"
        - "src/types/index.ts"
      depends_on: []

    - id: "7.2"
      title: "Attribution automatique 16h30"
      status: "completed"
      priority: "P0"
      estimated_complexity: "high"
      description: |
        Scheduler Rust pour attribution
        - V√©rifie jour travaill√© (L-M-J-V)
        - Calcule reward_type selon avertissements
        - Attribution silencieuse
      acceptance_criteria:
        - "Attribution √† 16h30 jours travaill√©s"
        - "Mercredi ignor√©"
        - "full si 0 avert, partial si 1-2"
      files_to_modify:
        - "src-tauri/src/scheduler/rewards.rs"
        - "src-tauri/src/main.rs"
      depends_on: ["7.1"]

    - id: "7.3"
      title: "Annulation par sanction"
      status: "completed"
      priority: "P0"
      estimated_complexity: "medium"
      description: |
        Quand sanction ajout√©e:
        - Chercher dernier partial (üôÇ) ‚Üí cancelled
        - Sinon dernier full (üòä) ‚Üí cancelled
      acceptance_criteria:
        - "Sanction annule partial en priorit√©"
        - "Sinon annule full"
        - "Mise √† jour imm√©diate UI"
      files_to_modify:
        - "src-tauri/src/commands/sanctions.rs"
        - "src/stores/studentStore.ts"
      depends_on: ["7.1"]

    - id: "7.4"
      title: "Affichage ligne L-M-J-V"
      status: "completed"
      priority: "P0"
      estimated_complexity: "medium"
      description: |
        Composant WeeklyRewardLine
        - Affiche jours √©coul√©s seulement
        - Emojis üòäüôÇüôÅ selon reward_type
        - Int√©gr√© dans StudentGridCard
      acceptance_criteria:
        - "Affiche uniquement jours pass√©s"
        - "Emojis corrects par jour"
        - "Mise √† jour temps r√©el"
      files_to_modify:
        - "src/components/StudentGrid/WeeklyRewardLine.tsx"
        - "src/stores/studentStore.ts"
        - "src/utils/dateUtils.ts"
      depends_on: ["7.1", "8.2"]

    - id: "7.5"
      title: "Reset hebdomadaire r√©compenses"
      status: "not_started"
      priority: "P1"
      estimated_complexity: "low"
      description: |
        Reset le lundi avec sanctions
        - Archive ou supprime anciennes r√©compenses
        - Ligne L-M-J-V vide nouvelle semaine
      acceptance_criteria:
        - "Reset lundi automatique"
        - "Historique conserv√© si besoin"
        - "UI refl√®te reset"
      files_to_modify:
        - "src-tauri/src/scheduler/resets.rs"
      depends_on: ["7.1", "7.2"]

# ============================================
# SPRINT 3: Barre Lat√©rale (Epic 9)
# Priorit√©: MOYENNE - Fonctionnalit√© ind√©pendante
# ============================================

sprint_3:
  name: "Barre Lat√©rale d'Acc√®s Rapide"
  epic: 9
  status: "not_started"
  stories:
    - id: "9.1"
      title: "Barre fine bord droit"
      status: "not_started"
      priority: "P0"
      estimated_complexity: "high"
      description: |
        Fen√™tre Tauri s√©par√©e
        - 10-15px largeur
        - Position bord droit √©cran
        - Always on top
        - Sans d√©coration
      acceptance_criteria:
        - "Barre visible bord droit"
        - "Reste au premier plan"
        - "Ne g√™ne pas autres apps"
      files_to_modify:
        - "src-tauri/tauri.conf.json"
        - "src/components/Sidebar/SidebarTrigger.tsx"
        - "src-tauri/src/main.rs"
      depends_on: []

    - id: "9.2"
      title: "Expansion/collapse au clic"
      status: "not_started"
      priority: "P0"
      estimated_complexity: "medium"
      description: |
        Clic toggle la largeur
        - Collapsed: ~15px
        - Expanded: ~250-300px
        - Animation fluide
      acceptance_criteria:
        - "Clic ouvre le panel"
        - "Second clic ferme"
        - "Animation < 300ms"
      files_to_modify:
        - "src/components/Sidebar/SidebarPanel.tsx"
        - "src/stores/studentStore.ts"
      depends_on: ["9.1"]

    - id: "9.3"
      title: "Liste minimaliste"
      status: "not_started"
      priority: "P1"
      estimated_complexity: "low"
      description: |
        Contenu du panel √©tendu
        - Liste scrollable √©l√®ves
        - Pr√©nom + boutons [‚ö†Ô∏è][üôÅ]
        - Pas de ligne L-M-J-V
      acceptance_criteria:
        - "Liste tous les √©l√®ves"
        - "Scroll fluide"
        - "Boutons visibles"
      files_to_modify:
        - "src/components/Sidebar/SidebarStudentRow.tsx"
        - "src/components/Sidebar/SidebarPanel.tsx"
      depends_on: ["9.2"]

    - id: "9.4"
      title: "Actions rapides sans modal"
      status: "not_started"
      priority: "P1"
      estimated_complexity: "low"
      description: |
        1 clic = action imm√©diate
        - Avertissement direct
        - Sanction directe (pas de raison)
        - Feedback visuel
      acceptance_criteria:
        - "Clic ‚ö†Ô∏è = avertissement imm√©diat"
        - "Clic üôÅ = sanction imm√©diate"
        - "Pas de modal"
      files_to_modify:
        - "src/components/Sidebar/SidebarStudentRow.tsx"
      depends_on: ["9.3"]

    - id: "9.5"
      title: "Synchronisation interface principale"
      status: "not_started"
      priority: "P1"
      estimated_complexity: "low"
      description: |
        Actions sidebar refl√©t√©es partout
        - Store Zustand partag√©
        - Update temps r√©el grille principale
        - Update TBI si ouvert
      acceptance_criteria:
        - "Action sidebar ‚Üí update grille"
        - "Annulation r√©compense fonctionne"
        - "Coh√©rence totale"
      files_to_modify:
        - "src/stores/studentStore.ts"
      depends_on: ["9.4"]

# ============================================
# ORDRE D'IMPL√âMENTATION RECOMMAND√â
# ============================================

implementation_order:
  phase_1:
    name: "Base Interface Cartes"
    stories: ["8.1", "8.2", "8.3"]
    rationale: "Fondation visuelle pour tout le reste"

  phase_2:
    name: "Syst√®me R√©compenses Core"
    stories: ["7.1", "7.4"]
    rationale: "DB + affichage sans automation"

  phase_3:
    name: "Automation R√©compenses"
    stories: ["7.2", "7.3", "7.5"]
    rationale: "Logique m√©tier compl√®te"

  phase_4:
    name: "TBI Cartes"
    stories: ["8.4"]
    rationale: "Finalise Epic 8"

  phase_5:
    name: "Barre Lat√©rale"
    stories: ["9.1", "9.2", "9.3", "9.4", "9.5"]
    rationale: "Feature ind√©pendante en dernier"

# ============================================
# M√âTRIQUES
# ============================================

# ============================================
# SPRINT 4: Am√©liorations UX (Hotfixes)
# Priorit√©: HAUTE - Feedback utilisateur
# ============================================

sprint_4:
  name: "Am√©liorations UX"
  status: "completed"
  stories:
    - id: "10.1"
      title: "Retrait manuel des avertissements"
      status: "completed"
      priority: "P0"
      description: |
        Permettre de retirer un avertissement en cas d'erreur
        - Clic sur ‚ö†Ô∏è existant pour retirer

    - id: "10.2"
      title: "Mode liste quand fen√™tre trop petite"
      status: "completed"
      priority: "P0"
      description: |
        Quand la fen√™tre est trop √©troite:
        - Passer en mode liste verticale
        - Permettre le scroll
        - Seuil: < 450px largeur

    - id: "10.3"
      title: "Boutons adaptatifs √† la taille"
      status: "completed"
      priority: "P1"
      description: |
        Taille des boutons selon viewport:
        - Petite fen√™tre: boutons compacts
        - Grande fen√™tre: boutons normaux

metrics:
  total_stories: 17
  stories_not_started: 7
  stories_in_progress: 0
  stories_completed: 10
  estimated_sprints: 4
